#pragma checksum "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor" "{8829d00f-11b8-4213-878b-770e8597ac16}" "6431e4f5f21eeeaf40515157ddc4e0948b23fd090041b9aae1413d98aa4b0e51"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorOverview.Pages
{
    #line default
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using System.Net.Http

#nullable disable
    ;
#nullable restore
#line 2 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Microsoft.AspNetCore.Authorization

#nullable disable
    ;
#nullable restore
#line 3 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization

#nullable disable
    ;
#nullable restore
#line 4 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms

#nullable disable
    ;
#nullable restore
#line 5 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing

#nullable disable
    ;
#nullable restore
#line 6 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Microsoft.AspNetCore.Components.Web

#nullable disable
    ;
#nullable restore
#line 7 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Microsoft.JSInterop

#nullable disable
    ;
#nullable restore
#line 8 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using BlazorOverview

#nullable disable
    ;
#nullable restore
#line 9 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using BlazorOverview.Shared

#nullable disable
    ;
#nullable restore
#line 10 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Blazored

#nullable disable
    ;
#nullable restore
#line 11 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Blazored.Modal

#nullable disable
    ;
#nullable restore
#line 12 "E:\Blazor專案\Notes Web API\BlazorOverview\_Imports.razor"
using Blazored.Modal.Services

#nullable disable
    ;
#nullable restore
#line 1 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
 using BlazorOverview.Models

#nullable disable
    ;
#nullable restore
#line 4 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
 using BlazorOverview.Services

#nullable disable
    ;
    #line default
    #line hidden
    #nullable restore
    public partial class MyNotes : global::Microsoft.AspNetCore.Components.ComponentBase
    #nullable disable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h3>我的記事</h3>\n\n");
            __builder.OpenElement(1, "table");
            __builder.AddAttribute(2, "class", "table");
            __builder.AddMarkupContent(3, "\n    ");
            __builder.AddMarkupContent(4, "<thead>\n        <tr>\n            <th>事項</th>\n            <th>修改</th>\n            <th>刪除</th>\n        </tr>\n    </thead>\n    ");
            __builder.OpenElement(5, "tbody");
            __builder.AddMarkupContent(6, "\n");
#nullable restore
#line 25 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
        

#line default
#line hidden
#nullable disable

#nullable restore
#line 25 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
         foreach (var NoteItem in Notes)
        {

#line default
#line hidden
#nullable disable

            __builder.AddContent(7, "            ");
            __builder.OpenElement(8, "tr");
            __builder.AddMarkupContent(9, "\n                ");
            __builder.OpenElement(10, "td");
            __builder.AddContent(11, 
#nullable restore
#line 29 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                     NoteItem.Title

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(12, "\n                ");
            __builder.OpenElement(13, "td");
            __builder.AddMarkupContent(14, "\n                    ");
            __builder.OpenElement(15, "input");
            __builder.AddAttribute(16, "type", "button");
            __builder.AddAttribute(17, "class", "btn btn-primary");
            __builder.AddAttribute(18, "value", "修改");
            __builder.AddAttribute(19, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 34 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                     ()=>Update(NoteItem)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(21, "\n                ");
            __builder.OpenElement(22, "td");
            __builder.AddMarkupContent(23, "\n                    ");
            __builder.OpenElement(24, "input");
            __builder.AddAttribute(25, "type", "button");
            __builder.AddAttribute(26, "class", "btn btn-danger");
            __builder.AddAttribute(27, "value", "刪除");
            __builder.AddAttribute(28, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 39 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                     ()=>Delete(NoteItem)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(29, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(30, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(31, "\n");
#nullable restore
#line 42 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
        }

#line default
#line hidden
#nullable disable

            __builder.AddContent(32, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(33, "\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "\n");
            __builder.OpenElement(35, "div");
            __builder.AddMarkupContent(36, "\n    ");
            __builder.OpenElement(37, "input");
            __builder.AddAttribute(38, "type", "button");
            __builder.AddAttribute(39, "class", "btn btn-primary");
            __builder.AddAttribute(40, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 47 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                                           Add

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(41, "value", "新增");
            __builder.CloseElement();
            __builder.AddMarkupContent(42, "\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(43, "\n\n");
            __builder.OpenElement(44, "div");
            __builder.AddAttribute(45, "class", "modal");
            __builder.AddAttribute(46, "tabindex", "-1");
            __builder.AddAttribute(47, "role", "dialog");
            __builder.AddAttribute(48, "id", 
#nullable restore
#line 51 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                                    DialogIdName

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(49, "\n    ");
            __builder.OpenElement(50, "div");
            __builder.AddAttribute(51, "class", "modal-dialog");
            __builder.AddAttribute(52, "role", "document");
            __builder.AddMarkupContent(53, "\n        ");
            __builder.OpenElement(54, "div");
            __builder.AddAttribute(55, "class", "modal-content");
            __builder.AddMarkupContent(56, "\n            ");
            __builder.OpenElement(57, "div");
            __builder.AddAttribute(58, "class", "modal-header");
            __builder.AddMarkupContent(59, "\n                ");
            __builder.AddMarkupContent(60, "<h5 class=\"modal-title\">記事項目</h5>\n                ");
            __builder.OpenElement(61, "button");
            __builder.AddAttribute(62, "type", "button");
            __builder.AddAttribute(63, "class", "close");
            __builder.AddAttribute(64, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 56 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                                              CloseDialog

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(65, "\n                    ");
            __builder.AddMarkupContent(66, "<span aria-hidden=\"true\">×</span>\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(67, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(68, "\n            ");
            __builder.OpenElement(69, "div");
            __builder.AddAttribute(70, "class", "modal-body");
            __builder.AddMarkupContent(71, "\n                ");
            __builder.OpenElement(72, "div");
            __builder.AddAttribute(73, "class", "row");
            __builder.AddMarkupContent(74, "\n                    ");
            __builder.OpenElement(75, "div");
            __builder.AddAttribute(76, "class", "col-9");
            __builder.AddMarkupContent(77, "\n                        ");
            __builder.OpenElement(78, "div");
            __builder.AddAttribute(79, "class", "row p-2");
            __builder.AddMarkupContent(80, "\n                            ");
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(81);
            __builder.AddAttribute(82, "Model", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 64 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                              CurrentMyNote

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(83, "OnValidSubmit", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Forms.EditContext>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 64 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                                                             HandleValidSubmit

#line default
#line hidden
#nullable disable
            ))));
            __builder.AddAttribute(84, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<global::Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(85, "\n                                ");
                __builder2.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.DataAnnotationsValidator>(86);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(87, "\n                                ");
                __builder2.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationSummary>(88);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(89, "\n                                ");
                __builder2.OpenElement(90, "div");
                __builder2.AddAttribute(91, "class", "form-group");
                __builder2.AddMarkupContent(92, "\n                                    ");
                __builder2.AddMarkupContent(93, "<label for=\"taskName\">Task Name</label>\n                                    ");
                __builder2.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputText>(94);
                __builder2.AddAttribute(95, "id", (object)("name"));
                __builder2.AddAttribute(96, "class", (object)("form-control"));
                __builder2.AddAttribute(97, "Value", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 69 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                                                                                            CurrentMyNote.Title

#line default
#line hidden
#nullable disable
                )));
                __builder2.AddAttribute(98, "ValueChanged", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.String>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.String>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => CurrentMyNote.Title = __value, CurrentMyNote.Title)))));
                __builder2.AddAttribute(99, "ValueExpression", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Linq.Expressions.Expression<global::System.Func<global::System.String>>>(() => CurrentMyNote.Title)));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(100, "\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(101, "\n                                ");
                __builder2.AddMarkupContent(102, "<button type=\"submit\" class=\"btn btn-primary\">儲存</button>\n                            ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(103, "\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(104, "\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(105, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(106, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(107, "\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(108, "\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(109, "\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 81 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
       
    // 儲存要顯示的集合清單內的所有紀錄
    public List<MyNote> Notes { get; set; } = new List<MyNote>();

    // 正在編輯或者新增的紀錄物件
    public MyNote CurrentMyNote { get; set; } = new MyNote();
    // 記錄下修改前的紀錄物件
    public MyNote OrigMyNote { get; set; } = new MyNote();
    // 是否要顯示新增或修改對話窗
    public bool ShowPopup { get; set; } = false;
    // 這次處理的紀錄是否為新增，若該屬性為 false，則表示這次要修改紀錄
    public bool IsNewMode { get; set; }
    // 要顯示該新增與修改對話窗的 Id 名稱
    public string DialogIdName { get; set; } = "myModal";

    // 元件建立的時候，所要執行的初始化工作，這裡使用非同步方式來呼叫
    protected override async Task OnInitializedAsync()
    {
        // 透過 IMyNoteService.RetriveAsync() 方法，來取得所有記事清單
        Notes = await MyNoteService.RetriveAsync();
    }
    // 刪除按鈕的點選事件之處理委派方法
    private void Delete(MyNote note)
    {
        CurrentMyNote = note;
        var parameters = new ModalParameters();
        // 宣告要傳遞給刪除對話窗的參數
        parameters.Add("RecordTitleName", note.Title);

        // 綁定使用者關閉對話窗的觸發事件
        Modal.OnClose += ModalClosed;
        // 顯示這個刪除對話窗
        Modal.Show<ConfirmDelete>("確認要刪除嗎？", parameters);
    }
    // 刪除對話窗的事件被觸發所要執行的委派方法
    async void ModalClosed(ModalResult modalResult)
    {
        // 檢查使用者是否有點選確認按鈕
        if (modalResult.Cancelled)
        {
            Console.WriteLine("Modal was Cancelled");
        }
        else
        {
            // 若使用者點選了確定按鈕
            Console.WriteLine(modalResult.Data.ToString());
            await DeleteIt(CurrentMyNote);
            StateHasChanged();
        }
        //解除該對話窗所綁定的事件
        Modal.OnClose -= ModalClosed;
    }
    // 刪除這個筆記事紀錄
    private async Task DeleteIt(MyNote note)
    {
        // 透過 IMyNoteService.DeleteAsync() 方法，從集合清單中刪除所選擇的紀錄
        await MyNoteService.DeleteAsync(note);
        Notes = await MyNoteService.RetriveAsync();
    }

    // 新增按鈕的點選事件之處理委派方法
    private async void Add()
    {
        // 設定此次要進行新增一筆紀錄
        IsNewMode = true;
        //產生要新增的紀錄物件
        CurrentMyNote = new MyNote();
        // 顯示新增紀錄使用的對話窗
        await jsRuntime.InvokeAsync<object>("ShowModal", DialogIdName);
    }
    // 修改按鈕的點選事件之處理委派方法
    private async void Update(MyNote note)
    {
        // 設定此次要進行修改紀錄
        IsNewMode = false;
        CurrentMyNote = OrigMyNote = note.Clone();
        //產生一個物件副本，做為要修改的紀錄物件
        CurrentMyNote = note.Clone();
        //保存此次要修改的紀錄物件
        OrigMyNote = note;
        // 顯示新增紀錄使用的對話窗
        await jsRuntime.InvokeAsync<object>("ShowModal", DialogIdName);
    }
    // 關閉對話窗的方法
    private async void CloseDialog()
    {
        // 設定要關閉對話窗的變數，讓對話窗的 HTML 標記不會顯示在瀏覽器畫面上
        await jsRuntime.InvokeAsync<object>("CloseModal", DialogIdName);
    }
    // 當使用者連完資料資料且點選 儲存 按鈕之後，若沒有錯誤產生，就會觸發此委派方法
    private async void HandleValidSubmit()
    {
        // 設定要關閉對話窗的變數，讓對話窗的 HTML 標記不會顯示在瀏覽器畫面上
        await jsRuntime.InvokeAsync<object>("CloseModal", DialogIdName);
        //判斷此次動作是要新增還是要修改紀錄
        if (IsNewMode == true)
        {
            // 透過 IMyNoteService.CreateAsync() 方法，加入一筆紀錄到集合清單內
            await MyNoteService.CreateAsync(CurrentMyNote);
        }
        else
        {
            // 透過 IMyNoteService.UpdateAsync() 方法，修改該紀錄
            await MyNoteService.UpdateAsync(OrigMyNote, CurrentMyNote);
        }
        // 透過 IMyNoteService.RetriveAsync() 方法，來取得所有記事清單
        Notes = await MyNoteService.RetriveAsync();
        StateHasChanged();
    }

#line default
#line hidden
#nullable disable

        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line 10 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
        IModalService

#line default
#line hidden
#nullable disable
         
#nullable restore
#line 10 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                      Modal

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line 8 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
        IJSRuntime

#line default
#line hidden
#nullable disable
         
#nullable restore
#line 8 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                   jsRuntime

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line 6 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
        IMyNoteService

#line default
#line hidden
#nullable disable
         
#nullable restore
#line 6 "E:\Blazor專案\Notes Web API\BlazorOverview\Pages\MyNotes.razor"
                       MyNoteService

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
    }
}
#pragma warning restore 1591
